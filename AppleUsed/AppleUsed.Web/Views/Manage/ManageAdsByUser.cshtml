@using AppleUsed.Web.Views.Manage
@model List<AppleUsed.BLL.DTO.AdDTO>
@{
    ViewData["Title"] = "Мои объявления";
    ViewData.AddActivePage(ManageNavPages.MyAds);
}

<h4>@ViewData["Title"]</h4>

<div class="ad-list col-lg-12">

    @{ foreach (var item in Model)
        {

            <ul>
                <li>
                    <div class="row">

                        <div class="col-lg-3 photo">
                            <a  asp-controller="Ad" asp-action="AdDetails" asp-route-id="@item.AdId">
                                <img style='max-width:170px; max-height:130px;' src="@item.PhotosList.FirstOrDefault()" />
                            </a>
                        </div>

                        <div class="col-lg-9">

                            <div>
                                <span>
                                    <a class="ad-title-text" asp-controller="Ad" asp-action="AdDetails" asp-route-id="@item.AdId">
                                        @item.Title
                                    </a>
                                </span>
                            </div>

                            <div class="ad-price-text">
                                <span>
                                    <b>@item.Price  .грн</b>
                                </span>
                            </div>

                            <div class="location">
                                <span>г. Киев</span>
                            </div>

                            <div class="last-modifaed">
                                <span>@item.DateUpdated</span>
                            </div>

                            <div class="ad-description">
                                @if (item.Description.Length < 100)
                                {
                                    <span>@item.Description.Substring(0, item.Description.Length) ..</span>
                                }
                                else
                                {
                                    <span>@item.Description.Substring(0, 100) .. </span>
                                }
                            </div>

                            <div class="btn-block">

                                <a class="btn btn-success" asp-controller="Manage" asp-action="GetAllConversationsByAdId" asp-route-id="@item.AdId">
                                    Сообщения <span class="badge">@item.NotDeliveredMessageCount</span>
                                </a>

                                <a class="btn btn-default" asp-controller="Manage" asp-action="EditAd" asp-route-id="@item.AdId">
                                    Редактировать
                                </a>

                                <a class="btn btn-danger" asp-controller="Manage" asp-action="DeactivationAd" asp-route-id="@item.AdId">
                                    Деактивировать
                                </a>
                              
                            </div>

                        </div>
                    </div>
                </li>
            </ul>

            <hr />

        }

    }

</div>
